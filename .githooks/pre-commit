#!/bin/sh

# Pre-commit hook to enforce code quality standards
# This hook will prevent commits that violate the 200-line rule

echo "ğŸ” Running pre-commit checks..."

# Check file lengths
echo "ğŸ“ Checking file lengths (200-line limit)..."
if ! node scripts/check-file-length.js --pre-commit; then
    echo ""
    echo "âŒ COMMIT REJECTED: Files exceed 200-line limit"
    echo "ğŸ’¡ Please refactor large files before committing"
    echo ""
    echo "ğŸ”§ Quick commands:"
    echo "   npm run check-file-length  # See all violations"
    echo "   npm run lint -- --fix      # Auto-fix some issues"
    echo ""
    exit 1
fi

# Run ESLint
echo "ğŸ” Running ESLint..."
if ! npm run lint; then
    echo ""
    echo "âŒ COMMIT REJECTED: ESLint errors found"
    echo "ğŸ’¡ Please fix linting errors before committing"
    echo ""
    echo "ğŸ”§ Quick commands:"
    echo "   npm run lint -- --fix      # Auto-fix some issues"
    echo ""
    exit 1
fi

echo "âœ… All pre-commit checks passed!"
echo "ğŸ‰ Proceeding with commit..."
exit 0 